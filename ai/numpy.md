Numpy使用
========

{{toc}}

## 概述

用于矩阵运算, 基本就是R的python版.

## 常用方法

 - ndim 维度(向量)数

```python

    In [1]: ta=np.array([1,2,3,4,5,6,7,8,9,10,11,12])
    In [2]: np.ndim(ta)
    Out[2]: 1
    
    In [3]: ta=np.array([[1,2,3],[4,5,6],[7,8,9],[10,11,12]])
    In [4]: np.ndim(ta)
    Out[4]: 2

```

 - shape 各个维度（向量）的元素数

```python

    In [18]: ta=np.array([[1,2,3],[4,5,6],[7,8,9],[10,11,12]])
    In [19]: np.shape(ta)
    Out[19]: (4, 3)
    
    In [20]: ta=np.array([[[1],[2],[3]],[[4],[5],[6]],[[7],[8],[9]],[[10],[11],[12]]])
    In [21]: np.shape(ta)
    Out[21]: (4, 3, 1)
```

 - size 元素数量

```python

    In [28]: ta=np.array([[[1],[2],[3]],[[4],[5],[6]],[[7],[8],[9]],[[10],[11],[12]]])
    In [29]: np.size(ta)
    Out[29]: 12

```

 - reshape 修改数组内元素维度

```python

    In [34]: ta=np.array([[[1],[2],[3]],[[4],[5],[6]],[[7],[8],[9]],[[10],[11],[12]]])

    In [35]: ta.reshape(2,6)
    Out[35]: 
    array([[ 1,  2,  3,  4,  5,  6],
           [ 7,  8,  9, 10, 11, 12]])
```

 - flat/ravel 元素列表化

```python

    In [102]: list(np.array([1,2,3,4,5,6,7]).flat)
    Out[102]: [1, 2, 3, 4, 5, 6, 7]

    In [103]: np.array([1,2,3,4,5,6,7]).ravel()
    Out[103]: array([1, 2, 3, 4, 5, 6, 7])
```

 - resize 修改数组内元素维度并构建成指定模式 

```python
    In [115]: np.resize([1,2,3,4,5,6],(3,2,2))
    Out[115]: 
    array([[[1, 2],
            [3, 4]],

           [[5, 6],
            [1, 2]],

           [[3, 4],
            [5, 6]]])

```

 - arange 连续整数(0开始)初始化一维数组
 - zeros/ones 0/1初始化数组

```python

    In [36]: np.arange(10)
    Out[36]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

    In [39]: np.zeros((2,3), 'int')
    Out[39]: 
    array([[0, 0, 0],
           [0, 0, 0]])

    In [40]: np.ones((2,3), 'str')
    Out[40]: 
    array([['1', '1', '1'],
           ['1', '1', '1']],
           dtype='|S1')

```

 - sum/cumsum 列求和/逐行累计

{{note(

    - axis默认值是None, 表示所有维度 
    - axis取值范围[-维数+1, 维数-1]
    - axis可以为负数
    
)}}

```python

    In [48]: ta=np.array([[[1],[2],[3]],[[4],[5],[6]],[[7],[8],[9]],[[10],[11],[12]]])

    In [49]: ta.sum(axis=0)
    Out[49]: 
    array([[22],
           [26],
           [30]])

    In [50]: ta.sum(axis=1)
    Out[50]: 
    array([[ 6],
           [15],
           [24],
           [33]])

    In [51]: ta.sum(axis=2)
    Out[51]: 
    array([[ 1,  2,  3],
           [ 4,  5,  6],
           [ 7,  8,  9],
           [10, 11, 12]])
    
    In [52]: ta.cumsum(axis=0)
    Out[52]: 
    array([[[ 1],
            [ 2],
            [ 3]],

           [[ 5],
            [ 7],
            [ 9]],

           [[12],
            [15],
            [18]],

           [[22],
            [26],
            [30]]])

    In [53]: ta.cumsum(axis=1)
    Out[53]: 
    array([[[ 1],
            [ 3],
            [ 6]],

           [[ 4],
            [ 9],
            [15]],

           [[ 7],
            [15],
            [24]],

           [[10],
            [21],
            [33]]])

    In [54]: ta.cumsum(axis=2)
    Out[54]: 
    array([[[ 1],
            [ 2],
            [ 3]],

           [[ 4],
            [ 5],
            [ 6]],

           [[ 7],
            [ 8],
            [ 9]],

           [[10],
            [11],
            [12]]])
```

 - dot 矩阵乘

```python
    In [85]: np.dot([[1,2,3],[4,5,6]], [[1,2],[3,4],[5,6]])
    Out[85]: 
    array([[22, 28],
           [49, 64]])
```
